<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fire Cake â€” Alec Turns 30</title>

  <style>
    body {
      margin: 0;
      background: #0c0c0c;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .panel {
      background: #111;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }

    button {
      padding: 12px 18px;
      margin: 6px;
      font-size: 18px;
      border-radius: 20px;
      border: none;
      cursor: pointer;
    }

    canvas {
      display: none;
      background: #000;
      border-radius: 12px;
    }

    #msg {
      text-align: center;
      margin-top: 10px;
    }
  </style>
</head>

<body>

  <div id="menu" class="panel">
    <h1>ðŸ”¥ Fire Cake â€” Alec Turns 30 ðŸ”¥</h1>
    <p>Pick a difficulty and blow out the candles</p>
    <button onclick="startGame()">Easy</button>
    <button onclick="startGame()">Normal</button>
    <button onclick="startGame()">Hard</button>
  </div>

  <div>
    <canvas id="cv" width="900" height="500"></canvas>
    <div id="msg"></div>
  </div>

  <script>
    const canvas = document.getElementById("cv");
    const ctx = canvas.getContext("2d");
    const msg = document.getElementById("msg");

    const W = canvas.width;
    const H = canvas.height;

    let candles = [];
    let flames = [];
    let spraying = false;
    let mouse = { x: W / 2, y: H / 2 };
    let running = false;

    /* ---------- SETUP ---------- */
    function startGame() {
      document.getElementById("menu").style.display = "none";
      canvas.style.display = "block";
      msg.textContent = "Hold mouse button to spray!";
      buildCandles();
      running = true;
      requestAnimationFrame(loop);
    }

    function buildCandles() {
      candles = [];
      flames = [];
      const count = 30;
      const spacing = 24;
      const startX = W / 2 - (count - 1) * spacing / 2;
      const baseY = 350;

      for (let i = 0; i < count; i++) {
        const x = startX + i * spacing;
        candles.push({ x, y: baseY, lit: true });
        flames.push({ x, y: baseY - 40, size: 28 });
      }
    }

    /* ---------- INPUT ---------- */
    canvas.addEventListener("mousemove", e => {
      const r = canvas.getBoundingClientRect();
      mouse.x = e.clientX - r.left;
      mouse.y = e.clientY - r.top;
    });
    window.addEventListener("mousedown", () => spraying = true);
    window.addEventListener("mouseup", () => spraying = false);

    /* ---------- DRAW ---------- */
    function drawCake() {
      ctx.fillStyle = "#5b2c1a";
      ctx.fillRect(150, 350, 600, 100);
    }

    function drawCandles() {
      candles.forEach(c => {
        ctx.fillStyle = "#eee";
        ctx.fillRect(c.x - 4, c.y - 40, 8, 40);
      });
    }

    function drawFlames() {
      flames.forEach(f => {
        ctx.fillStyle = "orange";
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.size, 0, Math.PI * 2);
        ctx.fill();
      });
    }

    function drawSpray() {
      if (!spraying) return;
      ctx.fillStyle = "rgba(255,255,255,.9)";
      for (let i = 0; i < 25; i++) {
        ctx.beginPath();
        ctx.arc(
          mouse.x + Math.random() * 10,
          mouse.y + Math.random() * 10,
          3,
          0,
          Math.PI * 2
        );
        ctx.fill();
      }
    }

    /* ---------- LOGIC ---------- */
    function update() {
      if (!spraying) return;

      flames = flames.filter(f => {
        const dx = f.x - mouse.x;
        const dy = f.y - mouse.y;
        return dx * dx + dy * dy > 1200;
      });

      if (flames.length === 0) {
        msg.textContent = "ðŸ”¥ Cake Saved! Happy 30th Alec! ðŸ”¥";
        running = false;
      }
    }

    /* ---------- LOOP ---------- */
    function loop() {
      if (!running) return;

      ctx.clearRect(0, 0, W, H);
      drawCake();
      drawCandles();
      drawFlames();
      drawSpray();
      update();

      requestAnimationFrame(loop);
    }
  </script>

</body>

</html>